/**!
 * FlexSearch.js v0.7.0-pre-alpha (Compact)
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/flexsearch
 */
(function(){var r;function t(a){for(var b=Array(a),c=0;c<a;c++)b[c]=x();return b}function x(){return Object.create(null)}function z(a,b){return b.length-a.length};var A=/[\W_]+/;function B(a){if(a=a.toLowerCase())if(a&&this.A&&(a=C(a,this.A)),this.C&&1<a.length&&(a=C(a,this.C)),a&&(A||""===A)&&(a=a.split(A),this.filter)){for(var b=this.filter,c=a.length,d=[],e=0,h=0;e<c;e++){var f=a[e];f&&!b[f]&&(d[h++]=f)}a=d}return a};function D(a,b){for(var c=Object.keys(a),d=c.length,e=[],h="",f=0,g=0,l,k;g<d;g++)l=c[g],(k=a[l])?(e[f++]=new RegExp(b?"(?!\\b)"+l+"(\\b|_)":l,"g"),e[f++]=k):h+=(h?"|":"")+l;h&&(e[f++]=new RegExp(b?"(?!\\b)("+h+")(\\b|_)":"("+h+")","g"),e[f]="");return e}function C(a,b){for(var c=0,d=b.length;c<d&&(a=a.replace(b[c],b[c+1]),a);c+=2);return a};var E={},F={};var G=Promise;function H(a,b,c){return I.call(this,this.add,arguments)}function J(a,b,c){return I.call(this,this.append,arguments)}function K(a,b,c){return I.call(this,this.search,arguments)}function L(a,b,c){return I.call(this,this.update,arguments)}function M(a,b){return I.call(this,this.remove,arguments)}function I(a,b){for(var c,d=0;d<b.length;d++)if("function"===typeof b[d]){c=b[d];delete b[d];break}var e=this;d=new G(function(h){setTimeout(function(){h(a.apply(e,b))})});return c?(d.then(c),this):d};function N(a,b,c){var d=a.length,e=[],h=x(),f=0;c&&(c=[]);for(var g=0;g<d;g++){for(var l=a[g],k=l.length,n=x(),m=!g,p=0;p<k;p++){var q=l[p],u=q.length;if(u){c&&(c[p]=[]);for(var v=0,y=0,w;v<u;v++)if(w=q[v],!g)n[w]=1;else if(h[w]){if(g===d-1){if(e[f++]=w,f===b)return e}else c&&y<b&&(c[p][y++]=w),n[w]=1;m=!0}}}if(!m&&!c)return[];h=n}if(c)for(a=c.length-1;0<=a;a--)if(h=(d=c[a])&&d.length){if(f+h>=b)return e.concat(d.slice(0,b-f));e=e.concat(d);f+=h}return e};var O={memory:{charset:"latin:extra",m:3,j:3,u:!1,l:"memory"},performance:{threshold:8,j:3,context:{depth:1,s:!0}},match:{charset:"latin:extra",D:"full",m:3},score:{charset:"latin:advanced",threshold:1,context:{depth:3,s:!0}},"default":{m:3,threshold:0,depth:3}};function P(a,b){if(!(this instanceof P))return new P(a);var c;if(a){"string"===typeof a?a=O[a]:(c=a.preset)&&(a=Object.assign({},O[c],a));c=a.charset;var d=a.lang;"string"===typeof c&&(-1===c.indexOf(":")&&(c+=":default"),c=F[c]);"string"===typeof d&&(d=E[d])}else a={};var e,h=a.context||{};this.encode=a.encode||c&&c.encode||B;this.register=b||x();var f=a.resolution||9;var g=a.threshold||0;g>=f&&(g=f-1);this.m=f;this.threshold=g;this.v=b=c&&c.D||a.tokenize||"strict";this.depth="strict"===b&&h.depth;
this.s=Q(h.bidirectional,!0);this.l=e="memory"===a.optimize;this.u=Q(a.fastupdate,!0);this.j=a.minlength||1;this.g=e?t(f-g):x();f=h.resolution||f;g=h.threshold||g;g>=f&&(g=f-1);this.h=f;this.o=g;this.i=e?t(f-g):x();this.B=c&&c.B||a.rtl;this.A=(b=a.matcher||d&&d.A)&&D(b,!1);this.C=(b=a.stemmer||d&&d.C)&&D(b,!0);if(a=b=a.filter||d&&d.filter){a=b;c=x();d=0;for(b=a.length;d<b;d++)c[a[d]]=1;a=c}this.filter=a}function Q(a,b){return"undefined"!==typeof a?a:b}r=P.prototype;
r.append=function(a,b){return this.add(a,b,!0)};
r.add=function(a,b,c){if(this.register[a]&&!c)return this.update(a,b);if(b&&(a||0===a)){b=this.encode(b);var d=b.length;if(d){for(var e=this.depth,h=this.m-this.threshold,f=x(),g=x(),l=0;l<d;l++){var k=b[this.B?d-1-l:l],n=k.length;if(k&&n>=this.j&&(e||!f[k])){var m=Math.min(this.m/d*l|0,l);if(m<h){var p="";switch(this.v){case "full":if(3<n){for(var q=0;q<n;q++){var u=q?Math.min(m/2+this.m/n*q/2|0,m+q):m;if(u<h)for(var v=n;v>q;v--)p=k.substring(q,v),p.length>=this.j&&R(this,f,p,u,a,c)}break}case "reverse":if(2<
n){for(q=n-1;0<q;q--)p=k[q]+p,p.length>=this.j&&R(this,f,p,m,a,c);p=""}case "forward":if(1<n)for(q=0;q<n;q++)p+=k[q],p.length>=this.j&&R(this,f,p,m,a,c);break;default:if(R(this,f,k,m,a,c),e&&1<d&&l<d-1)for(n=this.h-this.o,m=x(),p=k,q=Math.min(e+1,d-l),u=m[p]=1;u<q;u++)if((k=b[this.B?d-1-l-u:l+u])&&k.length>=this.j&&!m[k]){if(m[k]=1,v=Math.min((this.h-q)/d*l+u|0,l+(u-1)),v<n){var y=this.s&&k>p;R(this,g,y?p:k,v,a,c,y?k:p)}}else q=Math.min(q+1,d-l)}}}}this.u||(this.register[a]=1)}}return this};
function R(a,b,c,d,e,h,f){var g=f?a.i:a.g;if(!b[c]||f&&!b[c][f])a.l&&(g=g[d]),f?(b[c]||(b[c]=x()),b[c][f]=1,g=g[f]||(g[f]=x())):b[c]=1,g=g[c]||(g[c]=[]),a.l||(g=g[d]||(g[d]=[])),h&&-1!==g.indexOf(e)||(g[g.length]=e,a.u&&(a=a.register[e]||(a.register[e]=[]),a[a.length]=g))}
r.search=function(a,b,c){"object"===typeof a?(c=a,a=c.query):"object"===typeof b&&(c=b);var d=[],e=this.threshold;if(c){b=c.limit;e=Q(c.threshold,e);var h=c.context;var f=c.suggest}if(a){a=this.encode(a);var g=a.length;if(1<g){c=x();for(var l=[],k=0,n=0,m;k<g;k++)if((m=a[k])&&m.length>=this.j&&!c[m])if(this.l||f||this.g[m])l[n++]=m,c[m]=1;else return d;a=l;g=a.length}}if(!g)return d;b||(b=100);c=this.m-e;e=this.h-e;h=this.depth&&1<g&&!1!==h;l=0;if(h){var p=a[0];l=1}else 1<g&&a.sort(z);for(;l<g;l++){n=
a[l];h?(k=S(this,d,f,e,b,2===g,n,p),f&&!1===k&&d.length||(p=n)):k=S(this,d,f,c,b,1===g,n);if(k)return k;if(f&&l===g-1){k=d.length;if(!k){if(h){h=0;l=-1;continue}return d}if(1===k)return d=d[0],d=1===d.length?d[0]:[].concat.apply([],d),d.length>b?d.slice(0,b):d}}return N(d,b,f)};function T(a,b,c,d){c?(d=d&&b>c,a=(a=a[d?b:c])&&a[d?c:b]):a=a[b];return a}
function S(a,b,c,d,e,h,f,g){var l=[],k=g?a.i:a.g;a.l||(k=T(k,f,g,a.s));if(k){var n=0;d=Math.min(k.length,d);for(var m=0,p=0,q;m<d&&!(q=k[m],a.l&&(q=T(q,f,g,a.s)),q&&(l[n++]=q,h&&(p+=q.length,p>=e)));m++);if(n){if(h)return l=1===n?l[0]:[].concat.apply([],l),l.length>e?l.slice(0,e):l;b[b.length]=l;return}}return!c&&l}r.contain=function(a){return!!this.register[a]};r.update=function(a,b){return this.remove(a).add(a,b)};
r.remove=function(a,b){var c=this.register[a];if(c){if(this.u)for(var d=0,e;d<c.length;d++)e=c[d],e.splice(e.indexOf(a),1);else U(this.g,a,this.m-this.threshold,this.l),this.depth&&U(this.i,a,this.h-this.o,this.l);b||delete this.register[a]}return this};
function U(a,b,c,d,e){var h=0;if(a.constructor===Array)if(e)b=a.indexOf(b),-1!==b?1<a.length&&(a.splice(b,1),h++):h++;else{e=Math.min(a.length,c);for(var f=0,g;f<e;f++)if(g=a[f])h=U(g,b,c,d,e),d||h||delete a[f]}else for(f in a)(h=U(a[f],b,c,d,e))||delete a[f];return h}r.addAsync=H;r.appendAsync=J;r.searchAsync=K;r.updateAsync=L;r.removeAsync=M;function V(a){if(!(this instanceof V))return new V(a);var b;a||(a={});this.v=[];this.g=[];this.i=[];this.register=x();this.key=(b=a.key)&&W(b,this.i)||"id";b=a.fastupdate;this.u="undefined"!==typeof b?b:!0;this.store=(b=a.store)&&x();this.h=b&&!0!==b&&[];b=a;a=x();var c=b.doc;if("string"===typeof c)c=[c];else if(c.constructor!==Array){var d=c;c=Object.keys(c)}for(var e=0,h,f;e<c.length;e++)h=c[e],d?(f=d[h],f="object"===typeof f?Object.assign({},b,f):b):f=b,a[h]=new P(f,this.register),this.v[e]=W(h,
this.i),this.g[e]=h;if(this.h)for(d=b.store,"string"===typeof d&&(d=[d]),b=0;b<d.length;b++)this.h[b]=W(d[b],this.i);this.o=a}function W(a,b){for(var c=a.split(":"),d=0,e=0;e<c.length;e++)a=c[e],0<=a.indexOf("[]")&&(a=a.substring(0,a.length-2))&&(b[d]=!0),a&&(c[d++]=a);d<c.length&&(c.length=d);return 1<d?c:c[0]}
function X(a,b,c,d,e){a=a[e];if(d===c.length-1)b[e]=a;else if(a)if(a.constructor===Array)for(b=b[e]=Array(a.length),e=0;e<a.length;e++)X(a,b,c,d,e);else b=b[e]||(b[e]=x()),e=c[++d],X(a,b,c,d,e)}function Y(a,b,c,d,e,h,f,g){a=a[f];if(d===b.length-1){if(a.constructor===Array){if(c[d]){for(b=0;b<a.length;b++)e.add(h,a[b],!0);return}a=a.join(" ")}e.add(h,a,g)}else if(a)if(a.constructor===Array)for(f=0;f<a.length;f++)Y(a,b,c,d,e,h,f,g);else f=b[++d],Y(a,b,c,d,e,h,f,g)}r=V.prototype;
r.add=function(a,b,c){if("object"===typeof a){a=b=a;var d=this.key;if("string"===typeof d)a=a[d];else for(var e=0;a&&e<d.length;e++)a=a[d[e]]}if(b&&(a||0===a)){if(this.register[a])return this.update(a,b);d=0;for(var h;d<this.g.length;d++)h=this.g[d],e=this.v[d],"string"===typeof e&&(e=[e]),Y(b,e,this.i,0,this.o[h],a,e[0],c);if(this.store){if(this.h){var f=x();for(c=0;c<this.h.length;c++)d=this.h[c],"string"===typeof d?f[d]=b[d]:X(b,f,d,0,d[0])}this.store[a]=f||b}}return this};
r.append=function(a,b){return this.add(a,b,!0)};r.update=function(a,b){return this.remove(a).add(a,b)};r.remove=function(a){"object"===typeof a&&(a=a[this.key]);if(this.register[a]){for(var b=0;b<this.g.length;b++)this.o[this.g[b]].remove(a,!0);this.store&&delete this.store[a];delete this.register[a]}return this};
r.search=function(a,b,c){"object"===typeof a?(c=a,a=c.query):"object"===typeof b&&(c=b);var d=[],e,h=0;if(c){var f=(e=c.pluck)||c.field;var g=c.tag;var l=c.enrich;var k="and"===c.bool;b=c.limit;if(f)if("string"===typeof f)f=[f];else if(f.constructor!==Array){var n=f;f=Object.keys(f)}}f||(f=this.g);k=k&&(1<f.length||g&&1<g.length);g=0;for(var m,p;g<f.length;g++)if(m=f[g],m=this.o[m].search(a,b,n?n[m]:c),p=m.length)d[h++]=m;else if(k)return[];if(!h)return[];if(e&&(!l||!this.store))return d[0];for(a=
0;a<f.length;a++){b=f[a];c=d[a];if(c.length&&l&&this.store){n=Array(c.length);for(k=0;k<c.length;k++)h=c[k],n[k]={key:h,doc:this.store[h]};c=n}if(e)return c;d[a]={field:b,result:c}}return d};r.contain=function(a){return!!this.register[a]};r.get=function(a){return this.store[a]};r.set=function(a,b){this.store[a]=b;return this};r.addAsync=H;r.appendAsync=J;r.searchAsync=K;r.updateAsync=L;r.removeAsync=M;window.FlexSearch={Index:P,Document:V,registerCharset:function(a,b){F[a]=b},registerLanguage:function(a,b){E[a]=b}};}).call(this);
