/**!
 * FlexSearch.js v0.7.0-pre-alpha (Light)
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/flexsearch
 */
(function(){function r(a){for(var b=Array(a),c=0;c<a;c++)b[c]=v();return b}function v(){return Object.create(null)}function y(a,b){return b.length-a.length};var z=/[\W_]+/;function A(a){if(a=a.toLowerCase())if(a&&this.o&&(a=B(a,this.o)),this.A&&1<a.length&&(a=B(a,this.A)),a&&(z||""===z)&&(a=a.split(z),this.filter)){for(var b=this.filter,c=a.length,d=[],g=0,k=0;g<c;g++){var e=a[g];e&&!b[e]&&(d[k++]=e)}a=d}return a};function C(a,b){for(var c=Object.keys(a),d=c.length,g=[],k="",e=0,f=0,h,l;f<d;f++)h=c[f],(l=a[h])?(g[e++]=new RegExp(b?"(?!\\b)"+h+"(\\b|_)":h,"g"),g[e++]=l):k+=(k?"|":"")+h;k&&(g[e++]=new RegExp(b?"(?!\\b)("+k+")(\\b|_)":"("+k+")","g"),g[e]="");return g}function B(a,b){for(var c=0,d=b.length;c<d&&(a=a.replace(b[c],b[c+1]),a);c+=2);return a};var D={},E={};function F(a,b,c){var d=a.length,g=[],k=v(),e=0;c&&(c=[]);for(var f=0;f<d;f++){for(var h=a[f],l=h.length,p=v(),q=!f,n=0;n<l;n++){var m=h[n],t=m.length;if(t){c&&(c[n]=[]);for(var u=0,x=0,w;u<t;u++)if(w=m[u],!f)p[w]=1;else if(k[w]){if(f===d-1){if(g[e++]=w,e===b)return g}else c&&x<b&&(c[n][x++]=w),p[w]=1;q=!0}}}if(!q&&!c)return[];k=p}if(c)for(a=c.length-1;0<=a;a--)if(k=(d=c[a])&&d.length){if(e+k>=b)return g.concat(d.slice(0,b-e));g=g.concat(d);e+=k}return g};function G(a,b){if(!(this instanceof G))return new G(a);if(a){var c=a.charset;var d=a.lang;"string"===typeof c&&(-1===c.indexOf(":")&&(c+=":default"),c=E[c]);"string"===typeof d&&(d=D[d])}else a={};var g,k=a.context||{};this.encode=a.encode||c&&c.encode||A;this.register=b||v();var e=a.resolution||9;var f=a.threshold||0;f>=e&&(f=e-1);this.i=e;this.s=f;this.F=b=c&&c.G||a.tokenize||"strict";this.m="strict"===b&&k.depth;this.v=H(k.bidirectional,!0);this.g=g="memory"===a.optimize;this.C=H(a.fastupdate,
!0);this.h=a.minlength||1;this.j=g?r(e-f):v();e=k.resolution||e;f=k.threshold||f;f>=e&&(f=e-1);this.l=e;this.D=f;this.B=g?r(e-f):v();this.u=c&&c.u||a.rtl;this.o=(b=a.matcher||d&&d.o)&&C(b,!1);this.A=(b=a.stemmer||d&&d.A)&&C(b,!0);if(a=b=a.filter||d&&d.filter){a=b;c=v();d=0;for(b=a.length;d<b;d++)c[a[d]]=1;a=c}this.filter=a}function H(a,b){return"undefined"!==typeof a?a:b}G.prototype.append=function(a,b){return this.add(a,b,!0)};
G.prototype.add=function(a,b,c){if(this.register[a]&&!c)return this.update(a,b);if(b&&(a||0===a)){b=this.encode(b);var d=b.length;if(d){for(var g=this.m,k=this.i-this.s,e=v(),f=v(),h=0;h<d;h++){var l=b[this.u?d-1-h:h],p=l.length;if(l&&p>=this.h&&(g||!e[l])){var q=Math.min(this.i/d*h|0,h);if(q<k){var n="";switch(this.F){case "full":if(3<p){for(var m=0;m<p;m++){var t=m?Math.min(q/2+this.i/p*m/2|0,q+m):q;if(t<k)for(var u=p;u>m;u--)n=l.substring(m,u),n.length>=this.h&&I(this,e,n,t,a,c)}break}case "reverse":if(2<
p){for(m=p-1;0<m;m--)n=l[m]+n,n.length>=this.h&&I(this,e,n,q,a,c);n=""}case "forward":if(1<p)for(m=0;m<p;m++)n+=l[m],n.length>=this.h&&I(this,e,n,q,a,c);break;default:if(I(this,e,l,q,a,c),g&&1<d&&h<d-1)for(p=this.l-this.D,q=v(),n=l,m=Math.min(g+1,d-h),t=q[n]=1;t<m;t++)if((l=b[this.u?d-1-h-t:h+t])&&l.length>=this.h&&!q[l]){if(q[l]=1,u=Math.min((this.l-m)/d*h+t|0,h+(t-1)),u<p){var x=this.v&&l>n;I(this,f,x?n:l,u,a,c,x?l:n)}}else m=Math.min(m+1,d-h)}}}}this.C||(this.register[a]=1)}}return this};
function I(a,b,c,d,g,k,e){var f=e?a.B:a.j;if(!b[c]||e&&!b[c][e])a.g&&(f=f[d]),e?(b[c]||(b[c]=v()),b[c][e]=1,f=f[e]||(f[e]=v())):b[c]=1,f=f[c]||(f[c]=[]),a.g||(f=f[d]||(f[d]=[])),k&&-1!==f.indexOf(g)||(f[f.length]=g,a.C&&(a=a.register[g]||(a.register[g]=[]),a[a.length]=f))}
G.prototype.search=function(a,b,c){"object"===typeof a?(c=a,a=c.query):"object"===typeof b&&(c=b);var d=[],g=this.s;if(c){b=c.limit;g=H(c.threshold,g);var k=c.context;var e=!1}if(a){a=this.encode(a);var f=a.length;if(1<f){c=v();for(var h=[],l=0,p=0,q;l<f;l++)if((q=a[l])&&q.length>=this.h&&!c[q])if(this.g||e||this.j[q])h[p++]=q,c[q]=1;else return d;a=h;f=a.length}}if(!f)return d;b||(b=100);c=this.i-g;g=this.l-g;k=this.m&&1<f&&!1!==k;h=0;if(k){var n=a[0];h=1}else 1<f&&a.sort(y);for(;h<f;h++){p=a[h];
k?(l=J(this,d,e,g,b,2===f,p,n),e&&!1===l&&d.length||(n=p)):l=J(this,d,e,c,b,1===f,p);if(l)return l;if(e&&h===f-1){l=d.length;if(!l){if(k){k=0;h=-1;continue}return d}if(1===l)return d=d[0],d=1===d.length?d[0]:[].concat.apply([],d),d.length>b?d.slice(0,b):d}}return F(d,b,e)};function K(a,b,c,d){c?(d=d&&b>c,a=(a=a[d?b:c])&&a[d?c:b]):a=a[b];return a}
function J(a,b,c,d,g,k,e,f){var h=[],l=f?a.B:a.j;a.g||(l=K(l,e,f,a.v));if(l){var p=0;d=Math.min(l.length,d);for(var q=0,n=0,m;q<d&&!(m=l[q],a.g&&(m=K(m,e,f,a.v)),m&&(h[p++]=m,k&&(n+=m.length,n>=g)));q++);if(p){if(k)return h=1===p?h[0]:[].concat.apply([],h),h.length>g?h.slice(0,g):h;b[b.length]=h;return}}return!c&&h}G.prototype.contain=function(a){return!!this.register[a]};G.prototype.update=function(a,b){return this.remove(a).add(a,b)};
G.prototype.remove=function(a,b){var c=this.register[a];if(c){if(this.C)for(var d=0,g;d<c.length;d++)g=c[d],g.splice(g.indexOf(a),1);else L(this.j,a,this.i-this.s,this.g),this.m&&L(this.B,a,this.l-this.D,this.g);b||delete this.register[a]}return this};
function L(a,b,c,d,g){var k=0;if(a.constructor===Array)if(g)b=a.indexOf(b),-1!==b?1<a.length&&(a.splice(b,1),k++):k++;else{g=Math.min(a.length,c);for(var e=0,f;e<g;e++)if(f=a[e])k=L(f,b,c,d,g),d||k||delete a[e]}else for(e in a)(k=L(a[e],b,c,d,g))||delete a[e];return k};window.FlexSearch={Index:G,Document:null,registerCharset:function(a,b){E[a]=b},registerLanguage:function(a,b){D[a]=b}};}).call(this);
